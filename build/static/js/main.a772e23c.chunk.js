(this.webpackJsonptagithub=this.webpackJsonptagithub||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/Professortocat_v2.58fc5435.png"},24:function(e,t,a){e.exports=a(56)},29:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){},56:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(11),c=a.n(s),o=(a(29),a(3)),i=a.n(o),l=a(9),u=a(4),h=a(5),d=a(7),m=a(6),p=a(2),g=a.n(p),f=a(10),v=a.n(f),w=a(23),E=(a(48),a(51),a(52),a(53),function(e){return r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-x",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M11.854 4.146a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708-.708l7-7a.5.5 0 0 1 .708 0z"}),r.a.createElement("path",{fillRule:"evenodd",d:"M4.146 4.146a.5.5 0 0 0 0 .708l7 7a.5.5 0 0 0 .708-.708l-7-7a.5.5 0 0 0-.708 0z"}))}),b=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={tags:e.props.tags},e.onKeyUp=function(t){var a=t.currentTarget.value;32!==t.keyCode&&188!==t.keyCode&&13!==t.keyCode||""===a.trim()||(e.addTags(a),t.currentTarget.value=""),13===t.keyCode&&e.props.onEnter(e.state.tags)},e.onKeyDown=function(t){var a=t.currentTarget.value;8===t.keyCode&&""===a&&(e.state.tags.pop(),e.forceUpdate())},e.onFocusOut=function(t){e.addTags(t.currentTarget.value),t.currentTarget.value=""},e}return Object(h.a)(a,[{key:"addTag",value:function(e){-1===this.state.tags.indexOf(e)&&(this.state.tags.push(e),this.forceUpdate())}},{key:"addTags",value:function(e){var t=this;e.split(/[\s,]+/).forEach((function(e){var a=e.trim();/^[A-Za-z0-9]+$/.test(a)&&t.addTag(a)}))}},{key:"renderTags",value:function(){var e=this;return this.state.tags.map((function(t,a){return r.a.createElement("div",{className:"tag",key:t},r.a.createElement("span",null,t),r.a.createElement("button",{onClick:function(){return function(t){e.state.tags.splice(e.state.tags.indexOf(t),1),e.forceUpdate()}(t)}},r.a.createElement(E,null)))}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"TagInput"},r.a.createElement("div",null,this.renderTags(),r.a.createElement("input",{type:"text",placeholder:this.props.placeholder,onKeyUp:this.onKeyUp,onKeyDown:this.onKeyDown,onBlur:this.onFocusOut})),r.a.createElement("button",{onClick:function(){return e.props.onEnter(e.state.tags)}},this.props.children))}}]),a}(r.a.Component),y=a(12),k=(a(54),function(e){return r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-pencil",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M11.293 1.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-9 9a1 1 0 0 1-.39.242l-3 1a1 1 0 0 1-1.266-1.265l1-3a1 1 0 0 1 .242-.391l9-9zM12 2l2 2-9 9-3 1 1-3 9-9z"}),r.a.createElement("path",{fillRule:"evenodd",d:"M12.146 6.354l-2.5-2.5.708-.708 2.5 2.5-.707.708zM3 10v.5a.5.5 0 0 0 .5.5H4v.5a.5.5 0 0 0 .5.5H5v.5a.5.5 0 0 0 .5.5H6v-1.5a.5.5 0 0 0-.5-.5H5v-.5a.5.5 0 0 0-.5-.5H3z"}))}),x=function(e){return r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-check2",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"}))},O=function(e){var t=e.title,a=e.description,s=e.author,c="url(".concat(e.avatarURL,")"),o="https://github.com/".concat(s),i="".concat(o,"/").concat(t),l=e.tags,u=Object(n.useState)(!1),h=Object(y.a)(u,2),d=h[0],m=h[1],p=Object(n.useState)(!1),g=Object(y.a)(p,2),f=g[0],v=g[1],w=l.map((function(t,a){return r.a.createElement("button",{key:a,className:"tag",onClick:function(){return e.tagOnClick(t)}},t)}));return r.a.createElement("article",{className:"Repo"},r.a.createElement("section",null,r.a.createElement("a",{className:"title",href:i,target:"_blank",rel:"noopener noreferrer"},t),r.a.createElement("div",{className:"description"},a),d?r.a.createElement("div",{className:"tags-form"},r.a.createElement("div",null,r.a.createElement(b,{placeholder:"Add tags",tags:l,onEnter:function(){m(!1),e.saveTags(l)}},r.a.createElement(x,null)))):r.a.createElement("div",{className:"tags-container"},w,r.a.createElement("button",{className:"edit",onClick:function(){return m(!0)}},r.a.createElement(k,null)))),r.a.createElement("aside",null,r.a.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer",style:{backgroundImage:c},onMouseEnter:function(){return v(!0)},onMouseLeave:function(){return v(!1)}},s),!!f&&r.a.createElement("div",null,s)))},N=a(22),j=a.n(N),C=function(e){return r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-house-door-fill",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"M6.5 10.995V14.5a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5v-7a.5.5 0 0 1 .146-.354l6-6a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 .146.354v7a.5.5 0 0 1-.5.5h-4a.5.5 0 0 1-.5-.5V11c0-.25-.25-.5-.5-.5H7c-.25 0-.5.25-.5.495z"}),r.a.createElement("path",{fillRule:"evenodd",d:"M13 2.5V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z"}))},R=function(e){return r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-person-fill",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"}))},z=function(e){return r.a.createElement("svg",{width:"1em",height:"1em",viewBox:"0 0 16 16",className:"bi bi-search",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{fillRule:"evenodd",d:"M10.442 10.442a1 1 0 0 1 1.415 0l3.85 3.85a1 1 0 0 1-1.414 1.415l-3.85-3.85a1 1 0 0 1 0-1.415z"}),r.a.createElement("path",{fillRule:"evenodd",d:"M6.5 12a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11zM13 6.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"}))},S=a(8),T=(a(55),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;if(Object(u.a)(this,a),(n=t.call(this,e)).state={visible:!0},null!==a.instance)throw new Error("Loading singleton instance already exists");return a.instance=Object(S.a)(n),n}return Object(h.a)(a,[{key:"setVisible",value:function(e){this.setState({visible:e})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"Loading-container",style:{display:this.state.visible?"flex":"none"}},r.a.createElement("div",null)))}}]),a}(r.a.Component));T.instance=null;var M="https://tagithub-api.herokuapp.com/",L=new w.a,B=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={username:void 0,search:[],currentSearch:[],data:[],nextPage:1,alert:"",endOfSearch:!1},e}return Object(h.a)(a,[{key:"sleep",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"fetchLogin",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,a,n=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.acquire();case 2:return t=e.sent,e.prev=3,this.setLoading(!0),e.next=7,v.a.get("".concat(M,"/user"),{withCredentials:!0}).then((function(e){return e.data.username})).catch((function(e){return n.setState({alert:e.message}),""}));case 7:a=e.sent,this.setState({username:a},this.fetchRepos),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:return e.prev=14,t(),e.next=18,this.sleep(300);case 18:return this.setLoading(!1),e.finish(14);case 20:case"end":return e.stop()}}),e,this,[[3,11,14,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchRepos",value:function(){var e=Object(l.a)(i.a.mark((function e(){var t,a,n,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.acquire();case 2:if(t=e.sent,e.prev=3,!this.state.endOfSearch&&void 0!==this.state.username&&""!==this.state.username){e.next=6;break}return e.abrupt("return");case 6:return this.setLoading(!0),e.next=9,v.a.get("".concat(M,"/repos?page=").concat(this.state.nextPage,"&tags=").concat(this.state.currentSearch.join(",")),{withCredentials:!0}).then((function(e){return e.data})).catch((function(e){return[]}));case 9:a=e.sent,n=a.length<30,r=n?this.state.nextPage:this.state.nextPage+1,a=this.state.data.concat(a),s=0===a.length?"No repositories found":"",this.setState({data:a,nextPage:r,alert:s,endOfSearch:n}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),console.log(e.t0);case 20:return e.prev=20,t(),e.next=24,this.sleep(300);case 24:return this.setLoading(!1),e.finish(20);case 26:case"end":return e.stop()}}),e,this,[[3,17,20,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=Object(l.a)(i.a.mark((function e(t,a,n){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.acquire();case 2:return r=e.sent,e.prev=3,this.setLoading(!0),e.next=7,v.a.put("".concat(M,"/repos/").concat(a,"/").concat(t),{tags:n},{withCredentials:!0});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0);case 12:return e.prev=12,r(),e.next=16,this.sleep(300);case 16:return this.setLoading(!1),e.finish(12);case 18:case"end":return e.stop()}}),e,this,[[3,9,12,18]])})));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"onResize",value:function(){var e=g()("#octocat"),t=e.width();e.css("margin-top",-(18+.1*t)+"px"),e.css("margin-bottom",-(18+.1*t)+"px"),e.css("margin-right",-.3*t+"px")}},{key:"componentDidMount",value:function(){var e=this;this.onResize(),window.addEventListener("resize",this.onResize),void 0===this.state.username&&this.fetchLogin(),window.addEventListener("scroll",(function(){g()(window).scrollTop()+g()(window).height()===g()(document).height()&&e.fetchRepos()}))}},{key:"search",value:function(){var e=this;g()(window).scrollTop(0),""===this.state.username?this.setState({alert:"You must sign in to search your repositories."}):void 0!==this.state.username&&this.setState({currentSearch:this.state.search,data:[],nextPage:1,alert:"",endOfSearch:!1},(function(){return e.fetchRepos()}))}},{key:"renderRepos",value:function(){var e=this,t=function(t){e.state.search.length=0,e.state.search.push(t),e.search()},a=0;return this.state.data.map((function(n){return r.a.createElement(O,Object.assign({key:a++},n,{tagOnClick:t,saveTags:function(t){return e.send(n.title,n.author,t)}}))}))}},{key:"setLoading",value:function(e){var t=T.instance;null!==t&&t.setVisible(e)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("nav",null,r.a.createElement("a",{className:"btn",href:"/"},r.a.createElement(C,null)),r.a.createElement("div",{className:"btn-group"},r.a.createElement("button",{className:"btn btn-secondary dropdown-toggle border-0","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},r.a.createElement(R,null)),""===this.state.username||void 0===this.state.username?r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right"},r.a.createElement("a",{className:"dropdown-item",href:"".concat(M,"/login")},"Sign in with GitHub")):r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right"},r.a.createElement("a",{className:"dropdown-item",href:"https://github.com/".concat(this.state.username),target:"_blank",rel:"noopener noreferrer"},"Go to your page"),r.a.createElement("a",{className:"dropdown-item",href:"".concat(M,"/logout")},"Sign out")))),r.a.createElement("div",{id:"header"},r.a.createElement("img",{id:"octocat",src:j.a,alt:"professortocat_v2 by jeejkang"}),r.a.createElement("div",{id:"search"},r.a.createElement(b,{placeholder:"Search your starred repositories",tags:this.state.search,onEnter:function(){return e.search()}},r.a.createElement(z,null))))),r.a.createElement("section",null,""!==this.state.alert&&r.a.createElement("div",{className:"alert alert-warning",role:"alert"},this.state.alert),this.renderRepos()),r.a.createElement("footer",null,"Filipe Ramos 2020"))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null)),document.getElementById("root")),c.a.render(r.a.createElement(T,null),document.getElementById("loading-root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.a772e23c.chunk.js.map